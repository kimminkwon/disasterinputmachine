<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
      layout:decorate="~{layout/layout1}">

<div layout:fragment="content">
    <div class="panel panel-default">
        <div class="panel-heading">List of Members</div>
    </div>
    <div class="panel-body pull-left" style="float: left;">
        <h4 style="float: left; margin-right: 10px;"><a class="label label-primary" th:href="@{/maintenance/list}">MAINTENANCE LIST</a></h4>
        <h4 style="float: left; margin-right: 10px;"><a class="label label-warning" th:href="@{/reservation/list}">RESERVATION LIST</a></h4>
        <h4 style="float: right;"><a class="label label-danger" th:href="@{/delete/list}">DELETE LIST</a></h4>
    </div>

    <div class="panel-body pull-right" style="float: right;">
        <h4 style="float: right;"><a class="label label-default" th:href="@{join}">NEW MEMBER</a></h4>
    </div> <div style="clear:both;"></div>

    <div class="panel-body">

        <div>
            <!-- Table -->
            <table class="table table-striped table-bordered table-hover"
                   id="dataTables-example">
                <thead>
                <tr>
                    <th>아이디</th>
                    <th>이름</th>
                    <th>가입일자</th>
                    <th>권한</th>
                    <th>탈퇴</th>
                </tr>
                </thead>
                <tbody>
                <tr class="odd gradeX" th:each="memberDto:${listOfDto}">
                    <td>
                        <a th:href='${memberDto.uid}' class='boardLink'>[[${memberDto.uid}]]</a>
                    </td>
                    <td> [[${memberDto.uname}]] </td>
                    <td> [[${memberDto.createTime}]] </td>
                    <td> [[${memberDto.roles[0].roleName}]] </td>
                    <td th:if="!${memberDto.roles[0].roleName.equals('ADMIN')}">
                        <a th:href='${memberDto.uid}' class='outHref'>탈퇴처리</a>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

        <!-- Form for Data passing -->
        <form id='f1' th:action="@{list}" method="get">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        </form>
    </div>
    <!-- end panel -->

</div>
<!-- end fragment -->

<th:block layout:fragment="script">
    <script th:inline="javascript">

        $(document).ready(function () {
            var formObj = $("#f1");
            /*
            // bno를 클릭했을 시, 수정 페이지로 넘어가도록 하는 메서드
            $(".boardLink").click(function (e){
                e.preventDefault();
                var boardNo = $(this).attr("href");
                formObj.attr("action", [[@{'/maintenance/view'}]]);
                formObj.append("<input type='hidden' name='mno' value='" + boardNo + "'>");
                formObj.submit();
            });

            // detailSearchBtn을 클릭했을 시, 검색 페이지로 넘어가도록 하는 메서드
            $("#detailSearchBtn").click(function (e){
                e.preventDefault();
                formObj.attr("action", [[@{'/maintenance/search'}]]);
                formObj.submit();
            });
             */
        });

    </script>
</th:block>